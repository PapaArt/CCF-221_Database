-- MySQL Script generated by MySQL Workbench
-- Sat Mar 12 17:19:23 2022
-- Model: New Model    Version: 1.0
-- MySQL Workbench Forward Engineering

SET @OLD_UNIQUE_CHECKS=@@UNIQUE_CHECKS, UNIQUE_CHECKS=0;
SET @OLD_FOREIGN_KEY_CHECKS=@@FOREIGN_KEY_CHECKS, FOREIGN_KEY_CHECKS=0;
SET @OLD_SQL_MODE=@@SQL_MODE, SQL_MODE='ONLY_FULL_GROUP_BY,STRICT_TRANS_TABLES,NO_ZERO_IN_DATE,NO_ZERO_DATE,ERROR_FOR_DIVISION_BY_ZERO,NO_ENGINE_SUBSTITUTION';

-- -----------------------------------------------------
-- Schema trabalhobd1
-- -----------------------------------------------------

-- -----------------------------------------------------
-- Schema trabalhobd1
-- -----------------------------------------------------
CREATE SCHEMA IF NOT EXISTS `trabalhobd1` DEFAULT CHARACTER SET utf8mb4 ;
USE `trabalhobd1` ;

-- -----------------------------------------------------
-- Table `trabalhobd1`.`fabricante`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `trabalhobd1`.`fabricante` (
  `idfabricante` INT NOT NULL,
  `nomefab` VARCHAR(30) NULL,
  `ano_fundacao` INT NULL,
  PRIMARY KEY (`idfabricante`))
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `trabalhobd1`.`jogo`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `trabalhobd1`.`jogo` (
  `idjogo` INT NOT NULL,
  `nomejogo` VARCHAR(30) NULL,
  `descricao` VARCHAR(30) NULL,
  PRIMARY KEY(`idjogo`))
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `trabalhobd1`.`midia`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `trabalhobd1`.`midia` (
  `idmidia` INT NOT NULL,
  `nomemid` VARCHAR(30) NULL,
  `velocidade_leitura` INT NULL,
  PRIMARY KEY (`idmidia`))
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `trabalhobd1`.`plataforma`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `trabalhobd1`.`plataforma` (
  `idplataforma` INT NOT NULL,
  `nomeplat` VARCHAR(30) NULL,
  `ano_lancamento` INT NULL,
  `memoria` INT NULL,
  `idfabricante` INT NOT NULL,
  PRIMARY KEY (`idplataforma`),
  INDEX `fk_plataforma_fabricante1_idx` (`idfabricante` ASC) VISIBLE,
  CONSTRAINT `fk_plataforma_fabricante1`
    FOREIGN KEY (`idfabricante`)
    REFERENCES `trabalhobd1`.`fabricante` (`idfabricante`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `trabalhobd1`.`compativel_midia`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `trabalhobd1`.`compativel_midia` (
  `idplataforma` INT NOT NULL,
  `idmidia` INT NOT NULL,
  PRIMARY KEY (`idplataforma`, `idmidia`),
  INDEX `fk_plataforma_has_midia_midia1_idx` (`idmidia` ASC) VISIBLE,
  INDEX `fk_plataforma_has_midia_plataforma_idx` (`idplataforma` ASC) VISIBLE,
  CONSTRAINT `fk_plataforma_has_midia_plataforma`
    FOREIGN KEY (`idplataforma`)
    REFERENCES `trabalhobd1`.`plataforma` (`idplataforma`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_plataforma_has_midia_midia1`
    FOREIGN KEY (`idmidia`)
    REFERENCES `trabalhobd1`.`midia` (`idmidia`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `trabalhobd1`.`compativel_jogo_plataforma`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `trabalhobd1`.`compativel_jogo_plataforma` (
  `idplataforma` INT NOT NULL,
  `idjogo` INT NOT NULL,
  `quantidade` INT NULL,
  `ano_lancamento_jogo` INT NULL,
  PRIMARY KEY (`idplataforma`, `idjogo`),
  INDEX `fk_plataforma_has_jogo_jogo1_idx` (`idjogo` ASC) VISIBLE,
  INDEX `fk_plataforma_has_jogo_plataforma1_idx` (`idplataforma` ASC) VISIBLE,
  CONSTRAINT `fk_idplataforma_jogo`
    FOREIGN KEY (`idplataforma`)
    REFERENCES `trabalhobd`.`plataforma` (`idplataforma`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_idjogo`
    FOREIGN KEY (`idjogo`)
    REFERENCES `trabalhobd`.`jogo` (`idjogo`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;

-- -----------------------------------------------------
-- Table `trabalhobd1`.`multiplayer`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `trabalhobd1`.`multiplayer` (
  `local` BOOLEAN NULL,
  `online` BOOLEAN NULL,
  `idjogo` INT NOT NULL,
  INDEX `fk_multiplayer_jogo1_idx` (`idjogo` ASC) VISIBLE,
  CONSTRAINT `fk_multiplayer_jogo1`
    FOREIGN KEY (`idjogo`)
    REFERENCES `trabalhobd1`.`jogo` (`idjogo`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `trabalhobd1`.`vendas`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `trabalhobd1`.`vendas` (
  `idjogo` INT NOT NULL,
  `idmidia` INT NOT NULL,
  `qtd_vendas` INT NULL,
  PRIMARY KEY (`idjogo`, `idmidia`),
  INDEX `fk_jogo_has_midia_midia1_idx` (`idmidia` ASC) VISIBLE,
  INDEX `fk_jogo_has_midia_jogo1_idx` (`idjogo` ASC) VISIBLE,
  CONSTRAINT `fk_jogo_has_midia_jogo1`
    FOREIGN KEY (`idjogo`)
    REFERENCES `trabalhobd1`.`jogo` (`idjogo`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_jogo_has_midia_midia1`
    FOREIGN KEY (`idmidia`)
    REFERENCES `trabalhobd1`.`midia` (`idmidia`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `trabalhobd1`.`periferico_ideal`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `trabalhobd1`.`periferico_ideal` (
  `periferico` VARCHAR(30) NOT NULL,
  `idjogo` INT NOT NULL,
  INDEX `fk_periferico_ideal_jogo1_idx` (`idjogo` ASC) VISIBLE,
  PRIMARY KEY (`idjogo`),
  CONSTRAINT `fk_periferico_ideal_jogo1`
    FOREIGN KEY (`idjogo`)
    REFERENCES `trabalhobd1`.`jogo` (`idjogo`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;

INSERT INTO `trabalhobd1`.`midia` (`idmidia`, `nomemid`, `velocidade_leitura`) VALUES (1, 'CD', 10);
INSERT INTO `trabalhobd1`.`midia` (`idmidia`, `nomemid`, `velocidade_leitura`) VALUES (2, 'DVD', 20);
INSERT INTO `trabalhobd1`.`midia` (`idmidia`, `nomemid`, `velocidade_leitura`) VALUES (3, 'Blu-ray', 40);
INSERT INTO `trabalhobd1`.`midia` (`idmidia`, `nomemid`, `velocidade_leitura`) VALUES (4, 'Disquete', 1);
INSERT INTO `trabalhobd1`.`midia` (`idmidia`, `nomemid`, `velocidade_leitura`) VALUES (5, 'SD', 100);
INSERT INTO `trabalhobd1`.`midia` (`idmidia`, `nomemid`, `velocidade_leitura`) VALUES (6, 'Cartucho', 1000);
INSERT INTO `trabalhobd1`.`midia` (`idmidia`, `nomemid`, `velocidade_leitura`) VALUES (7, 'HD-USB', 100);


INSERT INTO `trabalhobd1`.`jogo` (`idjogo`, `nomejogo`, `descricao`) VALUES (1, 'River Raid', 'Tiro');
INSERT INTO `trabalhobd1`.`jogo` (`idjogo`, `nomejogo`, `descricao`) VALUES (2, 'Mario Bros', 'Aventura');
INSERT INTO `trabalhobd1`.`jogo` (`idjogo`, `nomejogo`, `descricao`) VALUES (3, 'F-Zero', 'Corrida');
INSERT INTO `trabalhobd1`.`jogo` (`idjogo`, `nomejogo`, `descricao`) VALUES (4, 'Super Mario Bros', 'Aventura');
INSERT INTO `trabalhobd1`.`jogo` (`idjogo`, `nomejogo`, `descricao`) VALUES (5, 'Wii Sports', 'Esportes variados');
INSERT INTO `trabalhobd1`.`jogo` (`idjogo`, `nomejogo`, `descricao`) VALUES (6, 'FIFA12', 'Futebol');
INSERT INTO `trabalhobd1`.`jogo` (`idjogo`, `nomejogo`, `descricao`) VALUES (7, 'God of War 3', 'Ação');
INSERT INTO `trabalhobd1`.`jogo` (`idjogo`, `nomejogo`, `descricao`) VALUES (8, 'Forza MotorSport', 'Corrida realista');
INSERT INTO `trabalhobd1`.`jogo` (`idjogo`, `nomejogo`, `descricao`) VALUES (9, 'Gran Turismo 5', 'Corrida realista');
INSERT INTO `trabalhobd1`.`jogo` (`idjogo`, `nomejogo`, `descricao`) VALUES (10, 'Street Fighter IV', 'Luta');

INSERT INTO `trabalhobd1`.`multiplayer` (`local`, `online`, `idjogo`) VALUES (TRUE, FALSE, 1);
INSERT INTO `trabalhobd1`.`multiplayer` (`local`, `online`, `idjogo`) VALUES (TRUE, FALSE, 2);
INSERT INTO `trabalhobd1`.`multiplayer` (`local`, `online`, `idjogo`) VALUES (TRUE, FALSE, 3);
INSERT INTO `trabalhobd1`.`multiplayer` (`local`, `online`, `idjogo`) VALUES (TRUE, FALSE, 4);
INSERT INTO `trabalhobd1`.`multiplayer` (`local`, `online`, `idjogo`) VALUES (TRUE, FALSE, 5);
INSERT INTO `trabalhobd1`.`multiplayer` (`local`, `online`, `idjogo`) VALUES (TRUE, TRUE, 6);
INSERT INTO `trabalhobd1`.`multiplayer` (`local`, `online`, `idjogo`) VALUES (FALSE, FALSE, 7);
INSERT INTO `trabalhobd1`.`multiplayer` (`local`, `online`, `idjogo`) VALUES (TRUE, TRUE, 8);
INSERT INTO `trabalhobd1`.`multiplayer` (`local`, `online`, `idjogo`) VALUES (TRUE, TRUE, 9);
INSERT INTO `trabalhobd1`.`multiplayer` (`local`, `online`, `idjogo`) VALUES (TRUE, FALSE, 10);

INSERT INTO `trabalhobd1`.`vendas` (`idjogo`, `idmidia`, `qtd_vendas`) VALUES (1, 6, 100);
INSERT INTO `trabalhobd1`.`vendas` (`idjogo`, `idmidia`, `qtd_vendas`) VALUES (2, 6, 150);
INSERT INTO `trabalhobd1`.`vendas` (`idjogo`, `idmidia`, `qtd_vendas`) VALUES (3, 6, 20);
INSERT INTO `trabalhobd1`.`vendas` (`idjogo`, `idmidia`, `qtd_vendas`) VALUES (4, 6, 137);
INSERT INTO `trabalhobd1`.`vendas` (`idjogo`, `idmidia`, `qtd_vendas`) VALUES (5, 2, 200);
INSERT INTO `trabalhobd1`.`vendas` (`idjogo`, `idmidia`, `qtd_vendas`) VALUES (6, 2, 500);
INSERT INTO `trabalhobd1`.`vendas` (`idjogo`, `idmidia`, `qtd_vendas`) VALUES (7, 3, 450);
INSERT INTO `trabalhobd1`.`vendas` (`idjogo`, `idmidia`, `qtd_vendas`) VALUES (8, 2, 100);
INSERT INTO `trabalhobd1`.`vendas` (`idjogo`, `idmidia`, `qtd_vendas`) VALUES (9, 3, 220);
INSERT INTO `trabalhobd1`.`vendas` (`idjogo`, `idmidia`, `qtd_vendas`) VALUES (10, 3, 250);

INSERT INTO `trabalhobd1`.`periferico_ideal` (`periferico` ,`idjogo`) VALUES ('Controle', 1);
INSERT INTO `trabalhobd1`.`periferico_ideal` (`periferico` ,`idjogo`) VALUES ('Controle', 2);
INSERT INTO `trabalhobd1`.`periferico_ideal` (`periferico` ,`idjogo`) VALUES ('Volante', 3);
INSERT INTO `trabalhobd1`.`periferico_ideal` (`periferico` ,`idjogo`) VALUES ('Controle', 4);
INSERT INTO `trabalhobd1`.`periferico_ideal` (`periferico` ,`idjogo`) VALUES ('Wiimote', 5);
INSERT INTO `trabalhobd1`.`periferico_ideal` (`periferico` ,`idjogo`) VALUES ('Controle', 6);
INSERT INTO `trabalhobd1`.`periferico_ideal` (`periferico` ,`idjogo`) VALUES ('Controle', 7);
INSERT INTO `trabalhobd1`.`periferico_ideal` (`periferico` ,`idjogo`) VALUES ('Volante', 8);
INSERT INTO `trabalhobd1`.`periferico_ideal` (`periferico` ,`idjogo`) VALUES ('Volante', 9);
INSERT INTO `trabalhobd1`.`periferico_ideal` (`periferico` ,`idjogo`) VALUES ('Controle arcade', 10);

#13) Pergunta 1)
SELECT nomejogo
FROM jogo NATURAL JOIN periferico_ideal
WHERE periferico = 'Volante';

#13) Pergunta 2)
SELECT nomejogo, nomemid
FROM jogo NATURAL JOIN midia NATURAL JOIN vendas
WHERE qtd_vendas BETWEEN 100 AND 250
ORDER BY nomejogo;

#13) Pergunta 3)
SELECT DISTINCT nomeplat
FROM compativel_jogo_plataforma NATURAL JOIN plataforma NATURAL JOIN multiplayer
WHERE online = TRUE
ORDER BY nomeplat;

SELECT *
FROM midia
HAVING MIN(idmidia)
LIMIT 1;
